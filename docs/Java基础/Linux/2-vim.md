---

Created at: 2021-11-04
Last updated at: 2021-11-04
Source URL: https://zhuanlan.zhihu.com/p/68111471


---

# 2-vim


* * *

**正常模式**
按 esc 或 ctrl+\[ 退出其它模式回到正常模式

复制：
yy   复制一行
nyy 复制n行

粘贴：
小写p 在光标后粘贴
大写P 在光标前粘贴

删除：
dd     删除一整行
dw     删除一个单词
dnw   删除 n 个单词
ndd   删除从光标开始的 n 行
dG     删除光标所在行到文本的结束

删除和替换字符：
x   删除光标当前所在的字符
r   替换掉光标当前所在的字符
R  替换掉从光标开始以后的所有字符，除非 ESC 退出

快速定位光标：
gg  光标定位到第一行的行首
G    光标定位到最后一行的行首
nG  光标定位到第 n 行的行首

撤销和恢复：
u             撤销，即ctrl + z
ctrl + r    恢复撤销，即ctrl + shift + z

~  将光标下的字母改变大小写
.    重复上一个操作的命令

连续按两次大写 ZZ 保存并退出

* * *

**插入模式**
从正常模式进入插入模式：
i       在光标所在的字符的前面插入
a      在光标所在的字符的后面插入
o      在光标所在行的后面新插入一行
cc     删除光标所在行并插入
cw    删除光标后面一个单词并插入

* * *

**命令模式**
正常模式下按 / 进入搜索，输入搜索词后按下回车键再按 n 可以跳到下一个匹配词
:noh 按回车后取消搜索匹配的高亮

正常模式下按 : 进入命令模式
:set nu              显示行号
:set nonu          取消行号
:n                      光标定位到 n 行
:n1,n2d             删除多行文本,n1 和 n2 指的是起始行号和结束行号，d 是删除关键字

文本的替换：
```
:{作用范围}s/{目标}/{替换}/{替换的标志}
```
作用范围分为当前行、全文、选区。
替换的标志可以是，g表示全局(global)替换，不加g表示只替换第一次出现；i 表示大小写不敏感查找，I 表示大小写敏感；c 表示需要确认。
例如：
把当前光标所在行的 abc 替换成 aaa
```
:s/abc/aaa/g
```
把全文中的 abc 替换成 aa
```
:%s/abc/aaa/g
```
把 n1 到 n2 行的abc全部替换成aaa
```
:n1,n2s/abc/aaa/g
```
把全文中的s和S替换成A
```
:%s/s/A/gi
```

退出vim：
:wq                 保存并退出
:x                    保存并退出
:w                   保存修改，但不退出
:q!                  不保存修改，强制退出
:saveas file     另存为

* * *

**可视化模式**
可视化模式可以选择文本区域，与用鼠标选择文本区域一样：
小写v        进入以字符为单位选择文本的可视化模式
大写V       进入以行为单位选择文本的可视化模式

可视化模式下选择操作区域以后:
d    删除所选择的区域
y    复制所选择的区域
p    把复制的文本粘贴到所选择的区域

